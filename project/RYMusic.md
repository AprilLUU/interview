## RYMusic

#### 功能：

1. 小程序登录功能

2. 首页歌曲信息展示，歌单详情页跳转，播放状态工具栏展示

3. MV信息页展示(下拉加载更多，上拉刷新)，MV播放页

4. 搜索页，热门搜索，历史搜索，搜索建议，搜索结果展示

5. 播放器功能，上一首下一首，播放暂停，播放模式切换

#### 项目亮点及遇到的问题：

1. 小程序分包，分包可以减少首页加载的代码量，提高首页渲染速度，并让小程序在空闲时刻将对应的分包下载下来。

2. swiper组件制作轮播图时，swiper组件有默认高度，因此需在图片加载完成之后动态获取图片高度后给swiper组件设置高度,并且对动态获取高度的函数做了节流处理，在这个过程中遇到小程序的一个bug，即在图片初次加载完成之后没有准确地获取到image组件的高度，解决方案是让节流函数最后一次一定会调用一次，即获取最后一次加载完图片获取到的image组件高度。

3. 搜索建议做了防抖处理，此处也遇到了一个bug，就是当输入完关键词之后删除过快，会出现当搜索内容为空时仍显示搜索建议内容，原因是做了防抖处理之后，当删除内容过快函数执行完毕后，上一次的网络请求仍然发送出去了，所以页面有了数据就渲染出来了，解决方案是执行防抖函数的取消功能，当搜素内容为空时，取消上一次的网络请求。

4. 做搜索建议功能时用了一个富文本组件，需要传递对应的属性，用以高亮显示与关键词匹配的文字

5. 播放器页面动态获取设备宽高比，根据设备宽高比决定是否显示歌词区域，以适配在较小机型的布局不会出现错乱

6. 用CSS伪类:empty解决小程序插槽没有插入内容时，显示默认内容

7. 封装event-store库来进行数据共享和状态管理（具备响应式）

8. CSS滤镜实现毛玻璃效果

9. 进度匹配歌词，当前时间去歌词数组里面查找到对应的歌词，找到时间大于当前的歌词，上一句即为匹配到的歌词。